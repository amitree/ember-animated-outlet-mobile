Ember.AnimatedContainerView=Ember.ContainerView.extend({classNames:["ember-animated-container"],init:function(){this._super(),Ember.AnimatedContainerView._views[this.get("name")]=this,this._isAnimating=!1},willDestroy:function(){this._super();var a=this.get("name");delete Ember.AnimatedContainerView._views[a],delete Ember.AnimatedContainerView._animationQueue[a]},_currentViewWillChange:Ember.beforeObserver(function(){var a=Ember.get(this,"currentView");a&&this.set("oldView",a)},"currentView"),_currentViewDidChange:Ember.observer(function(){var a=Ember.get(this,"currentView"),b=Ember.get(this,"oldView"),c=this.get("name"),d=null;a&&(b&&(Ember.assert("Ember.AnimatedContainerView can only animate non-virtual views. You need to explicitly define your view class.",!b.isVirtual),Ember.assert("Ember.AnimatedContainerView can only animate non-virtual views. You need to explicitly define your view class.",!a.isVirtual),d=Ember.AnimatedContainerView._animationQueue[c],delete Ember.AnimatedContainerView._animationQueue[c],d&&!Ember.AnimatedContainerView._effects[d]&&(Ember.warn("Unknown animation effect: "+d),d=null),this.set("oldView",null)),this._queuedAnimation&&(b.destroy(),b=this._queuedAnimation.oldView),this._queuedAnimation={newView:a,oldView:b,effect:d},this._handleAnimationQueue())},"currentView"),_handleAnimationQueue:function(){if(!this._isAnimating){var a=this,b=this._queuedAnimation;if(b){var c=b.newView,d=b.oldView,e=b.effect;this._queuedAnimation=null,this.pushObject(c),d&&e?(this._isAnimating=!0,c.on("didInsertElement",function(){Ember.AnimatedContainerView._effects[e](a,c,d,function(){Em.run(function(){a.removeObject(d),d.destroy(),a._isAnimating=!1,a._handleAnimationQueue()})})})):d&&(this.removeObject(d),d.destroy())}}},enqueueAnimation:function(a){Ember.AnimatedContainerView._animationQueue[this.get("name")]=a},setCurrentViewAnimated:function(a,b){this.enqueueAnimation(b),this.set("currentView",a)}}),Ember.AnimatedContainerView.reopenClass({_views:{},_animationQueue:{},enqueueAnimations:function(a){for(var b in a)a.hasOwnProperty(b)&&(this._animationQueue[b]=a[b])},_effects:{},registerEffect:function(a,b){this._effects[a]=b}}),Handlebars.registerHelper("animated-outlet",function(a,b){var c;for(a&&a.data&&a.data.isRenderData&&(b=a,a="main"),c=b.data.view;!c.get("template.isTop");)c=c.get("_parentView");return b.data.view.set("outletSource",c),b.hash.currentViewBinding="_view.outletSource._outlets."+a,Ember.Handlebars.helpers.view.call(this,Ember.AnimatedContainerView,b)}),Handlebars.registerHelper("animatedOutlet",function(){return Ember.warn("The 'animatedOutlet' view helper is deprecated in favor of 'animated-outlet'"),Ember.Handlebars.helpers["animated-outlet"].apply(this,arguments)});var get=Ember.get,set=Ember.set;Ember.onLoad("Ember.Handlebars",function(){function a(a){var b=get(a,"routeArgs").slice(),c=a.parameters.animations;return b.splice(1,0,c),b}var b=(Ember.Router.resolveParams,Ember.ViewUtils.isSimpleClick),c=Ember.AnimatedLinkView=Ember.LinkView.extend({classNames:["animated-link-view"],_invoke:function(c){if(!b(c))return!0;if(c.preventDefault(),this.bubbles===!1&&c.stopPropagation(),get(this,"_isDisabled"))return!1;if(get(this,"loading"))return Ember.Logger.warn("This link-to is in an inactive loading state because at least one of its parameters presently has a null/undefined value, or the provided route name is invalid."),!1;var d=this.get("router"),e=a(this,d);get(this,"replace")?d.replaceWithAnimated.apply(d,e):d.transitionToAnimated.apply(d,e)}});c.toString=function(){return"AnimatedLinkView"},Ember.Handlebars.registerHelper("link-to-animated",function(a){var b=[].slice.call(arguments,-1)[0],d=[].slice.call(arguments,0,-1),e=b.hash;Ember.assert("link-to-animated must contain animations","string"==typeof e.animations);for(var f=/\s*([a-z]+)\s*:\s*([a-z]+)/gi,g={};match=f.exec(e.animations);)g[match[1]]=match[2];return delete e.animations,e.namedRoute=a,e.currentWhen=e.currentWhen||a,e.disabledBinding=e.disabledWhen,e.parameters={context:this,options:b,animations:g,params:d},Ember.Handlebars.helpers.view.call(this,c,b)}),Ember.Handlebars.registerHelper("linkToAnimated",function(){return Ember.warn("The 'linkToAnimated' view helper is deprecated in favor of 'link-to-animated'"),Ember.Handlebars.helpers["link-to-animated"].apply(this,arguments)})}),Ember.Router.reopen({transitionToAnimated:function(a,b){return Ember.AnimatedContainerView.enqueueAnimations(b),Array.prototype.splice.call(arguments,1,1),this.transitionTo.apply(this,arguments)},replaceWithAnimated:function(a,b){return Ember.AnimatedContainerView.enqueueAnimations(b),Array.prototype.splice.call(arguments,1,1),this.replaceWith.apply(this,arguments)}}),Ember.Route.reopen({transitionToAnimated:function(){var a=this.router;return a.transitionToAnimated.apply(a,arguments)},replaceWithAnimated:function(){var a=this.router;return a.replaceWithAnimated.apply(a,arguments)}}),Ember.ControllerMixin.reopen({transitionToRouteAnimated:function(a,b){return Ember.AnimatedContainerView.enqueueAnimations(b),Array.prototype.splice.call(arguments,1,1),this.transitionToRoute.apply(this,arguments)},replaceRouteAnimated:function(a,b){return Ember.AnimatedContainerView.enqueueAnimations(b),Array.prototype.splice.call(arguments,1,1),this.replaceRoute.apply(this,arguments)}}),Ember.AnimatedContainerView.registerEffect("fade",function(a,b,c,d){var e=b.$(),f=c.$();e.addClass("ember-animated-container-fade-new"),f.addClass("ember-animated-container-fade-old"),setTimeout(function(){f.addClass("ember-animated-container-fade-old-fading"),setTimeout(function(){e.removeClass("ember-animated-container-fade-new"),d()},550)},0)}),Ember.AnimatedContainerView.registerEffect("flip",function(a,b,c,d){var e=a.$(),f=b.$(),g=c.$(),h=650;e.wrap('<div class="ember-animated-container-flip-wrap"></div>'),e.addClass("ember-animated-container-flip-ct"),f.addClass("ember-animated-container-flip-new"),g.addClass("ember-animated-container-flip-old"),setTimeout(function(){e.addClass("ember-animated-container-flip-ct-flipping"),setTimeout(function(){e.unwrap(),e.removeClass("ember-animated-container-flip-ct"),e.removeClass("ember-animated-container-flip-ct-flipping"),f.removeClass("ember-animated-container-flip-new"),d()},h)},0)}),function(){var a=function(a,b,c,d,e,f){var g=a.$(),h=b.$(),i=f?2050:450;g.addClass("ember-animated-container-slide-"+e+"-ct"),f&&g.addClass("ember-animated-container-slide-slow-ct"),h.addClass("ember-animated-container-slide-"+e+"-new"),setTimeout(function(){g.addClass("ember-animated-container-slide-"+e+"-ct-sliding"),setTimeout(function(){g.removeClass("ember-animated-container-slide-"+e+"-ct"),f&&g.removeClass("ember-animated-container-slide-slow-ct"),g.removeClass("ember-animated-container-slide-"+e+"-ct-sliding"),h.removeClass("ember-animated-container-slide-"+e+"-new"),d()},i)},0)};Ember.AnimatedContainerView.registerEffect("slideLeft",function(b,c,d,e){a(b,c,d,e,"left",!1)}),Ember.AnimatedContainerView.registerEffect("slideRight",function(b,c,d,e){a(b,c,d,e,"right",!1)}),Ember.AnimatedContainerView.registerEffect("slideUp",function(b,c,d,e){a(b,c,d,e,"up",!1)}),Ember.AnimatedContainerView.registerEffect("slideDown",function(b,c,d,e){a(b,c,d,e,"down",!1)}),Ember.AnimatedContainerView.registerEffect("slowSlideLeft",function(b,c,d,e){a(b,c,d,e,"left",!0)}),Ember.AnimatedContainerView.registerEffect("slowSlideRight",function(b,c,d,e){a(b,c,d,e,"right",!0)}),Ember.AnimatedContainerView.registerEffect("slowSlideUp",function(b,c,d,e){a(b,c,d,e,"up",!1)}),Ember.AnimatedContainerView.registerEffect("slowSlideDown",function(b,c,d,e){a(b,c,d,e,"down",!1)})}(),function(){var a=function(a,b,c,d,e){var f=a.$(),g=b.$(),h=450;f.addClass("ember-animated-container-slideOver-old"),g.addClass("ember-animated-container-slideOver-"+e+"-new"),setTimeout(function(){g.addClass("ember-animated-container-slideOver-"+e+"-new-sliding"),setTimeout(function(){g.removeClass("ember-animated-container-slideOver-"+e+"-new"),g.removeClass("ember-animated-container-slideOver-"+e+"-new-sliding"),f.removeClass("ember-animated-container-slideOver-old"),d()},h)},0)};Ember.AnimatedContainerView.registerEffect("slideOverLeft",function(b,c,d,e){a(b,c,d,e,"left")}),Ember.AnimatedContainerView.registerEffect("slideOverRight",function(b,c,d,e){a(b,c,d,e,"right")}),Ember.AnimatedContainerView.registerEffect("slideOverUp",function(b,c,d,e){a(b,c,d,e,"up")}),Ember.AnimatedContainerView.registerEffect("slideOverDown",function(b,c,d,e){a(b,c,d,e,"down")})}(),function(){function a(){b.enabled&&(b.enabled=!1,setTimeout(function(){b.enabled=!0},400))}var b={start:!1,x:null,y:null,enabled:!0},c=/iP(ad|hone|od)/.test(navigator.userAgent),d={findControl:function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},needsFocus:function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}}};Ember.EventDispatcher.reopen({setupHandler:function(e,f,g){var h,i=this;if(b.enabled){var j=function(e,f){switch(e.type){case"touchstart":b.start=!0,b.x=e.originalEvent.touches[0].clientX,b.y=e.originalEvent.touches[0].clientY,e.stopPropagation();break;case"touchmove":b.start&&(h=Math.max(Math.abs(e.originalEvent.touches[0].clientX-b.x),Math.abs(e.originalEvent.touches[0].clientY-b.y)),h>20&&(b.start=!1));break;case"touchend":if(b.start){if(h=Math.max(Math.abs(e.originalEvent.changedTouches[0].clientX-b.x),Math.abs(e.originalEvent.changedTouches[0].clientY-b.y)),20>h&&(e.preventDefault(),e.stopImmediatePropagation(),b.enabled)){var j,k=$(e.target),l=k.attr("type"),m=e.target.tagName.toLowerCase();"label"===m?(j=$(d.findControl(e.target)),"checkbox"==j.attr("type")?j.prop("checked",!j.prop("checked")).change():$(j).focus()):"checkbox"==l?k.prop("checked",!k.prop("checked")).change():d.needsFocus(e.target)?c&&e.target.setSelectionRange&&0!==e.target.type.indexOf("date")&&"time"!==e.target.type?(length=e.target.value.length,e.target.setSelectionRange(length,length)):e.target.focus():(document.activeElement&&document.activeElement!==e.target&&document.activeElement.blur(),k.click())}b.start=!1}}var n=Ember.View.views[this.id],o=!0,p=null;if(p=i._findNearestEventManager(n,g),p&&p!==f){if("click"==g){if(!b.enabled)return!1;a()}o=i._dispatchEvent(p,e,g,n)}else n?o=i._bubbleEvent(n,e,g):e.stopPropagation();return o};e.delegate(".ember-view",f+".ember",function(a,b){return j.call(this,a,b)}),e.delegate("[data-ember-action]",f+".ember",function(c){var d=Ember.$(c.currentTarget).attr("data-ember-action"),e=Ember.Handlebars.ActionHelper.registeredActions[d],f=e.handler;return e.eventName===g?b.enabled?(a(),f(c)):!1:void 0}),e.delegate(".animated-link-view",f+".ember",function(a,b){return j.call(this,a,b)})}}})}();